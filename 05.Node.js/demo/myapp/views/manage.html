<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8" />
    <title>MyLyrics | 歌單管理</title>
    <link rel="stylesheet" href="/style.css" />
    <link rel="shortcut icon" href="/A.png" type="image/x-icon">
    <link rel="stylesheet" href="/style.css" />
</head>

<body>

    <header>
        <nav>
            <div class="logo">
                <a href="/">
                    <img src="/A.png" alt="MyLyrics"> MyLyrics
                </a>
            </div>
            <div class="menu">
                <a href="/manage">歌單管理</a>
                <a href="/about">關於</a>
            </div>
        </nav>
        <div class="backhome" class="p-4">
            <a href="/">&lt; 回首頁</a>
        </div>
    </header>

    <main class="container">
        <h1>歌單管理</h1>
        <table id="songTable">
            <thead>
                <tr>
                    <th>專輯封面</th>
                    <th>歌名</th>
                    <th>歌手</th>
                    <th>動作</th>
                </tr>
            </thead>
            <tbody>
                <!-- 資料將透過 JS 動態插入 -->
            </tbody>
        </table>
    </main>

    <footer>
        <div class="footer-content">
            <div>&copy; 2025 MyLyrics. 版權所有.</div>
            <div>
                <a href="/">首頁</a> |
                <a href="/about">關於我們</a>
            </div>
        </div>
    </footer>

    <script>

        console.log("發送取得 API (假)");
        const songs = [
            {
                "id": "f05ae3f0-abab-4986-acb1-f47875204754",
                "title": "Golden",
                "artist": "HUNTR/X, EJAE, AUDREY NUNA, REI AMI, KPop Demon Hunters Cast",
                "image": "/uploads/KPOP DEMON HUNTERS.jpg",
                "lyrics": "I was a ghost, I was alone, hah\n어두워진, hah, 압길속에 (Ah)\nGiven the throne, I didn't know how to believe\nI was the queen that I'm meant to be\nI lived two lives, tried to play both sides\nBut I couldn't find my own place\nCalled a problem child 'cause I got too wild\nBut now that's how I'm getting paid, 끝없이 on stage\n\nI'm done hidin', now I'm shinin' like I'm born to be\nWe dreamin' hard, we came so far, now I believe\n\nWe're goin' up, up, up, it's our moment\nYou know together we're glowing\nGonna be, gonna be golden\nOh, up, up, up with our voices\n영원히 깨질 수 없는\nGonna be, gonna be golden\n\nOh, I'm done hidin' now I'm shinin' like I'm born to be\nOh, our time, no fear, no lies\nThat's who we're born to be\n\nWaited so long to break these walls down\nTo wake up and feel like me\nPut these patterns all in the past now\nAnd finally live like the girl they all see\n\nNo more hiding, I'll be shining like I'm born to be\n'Cause we are hunters, voices strong, and I know I believe\n\nWe're goin' up, up, up, it's our moment\nYou know together we're glowing\nGonna be, gonna be golden\nOh, up, up, up, with our voices\n영원히 깨질 수 없는\nGonna be, gonna be golden\n\nOh, I'm done hidin', now I'm shining like I'm born to be\nOh, our time, no fears, no lies\nThat's who we're born to be\n\nYou know we're gonna be, gonna be golden\nWe're gonna be, gonna be\nBorn to be, born to be glowin'\n밝게 빛나는 우린\nYou know that it's our time, no fears, no lies\nThat's who we're born to be"
            },
        ];
        const tbody = document.querySelector('#songTable tbody');
        for (let index = 0; index < songs.length; index++) {
            const song = songs[index];

            const tr = document.createElement('tr');

            tr.innerHTML = `
            <td><img class="cover" src="${song.image}" alt="${song.title} 封面" /></td>
            <td>${song.title}</td>
            <td>${song.artist}</td>
            <td>
                <div class="actions">
                    <button class="edit-button" onclick="editSong('${song.id}')">編輯</button>
                    <button class="delete-button" onclick="deleteSong('${song.id}')">刪除</button>
                </div>
            </td>
          `;

            tbody.appendChild(tr);
        }

        // API 取得資料        
        // fetch('/api/songs')
        //     .then(res => res.json())
        //     .then(data => {
        //         const tbody = document.querySelector('#songTable tbody');
        //         data.forEach(song => {
        //             const tr = document.createElement('tr');

        //             tr.innerHTML = `
        //     <td><img class="cover" src="${song.image}" alt="${song.title} 封面" /></td>
        //     <td>${song.title}</td>
        //     <td>${song.artist}</td>
        //     <td>
        //         <div class="actions">
        //             <button class="edit-button" onclick="editSong('${song.id}')">編輯</button>
        //             <button class="delete-button" onclick="deleteSong('${song.id}')">刪除</button>
        //         </div>
        //     </td>
        //   `;

        //             tbody.appendChild(tr);
        //         });
        //     })
        //     .catch(err => {
        //         console.error('讀取歌單失敗:', err);
        //     });

        function editSong(id) {
            // 轉跳到編輯頁面
            window.location.href = `/edit?id=${id}`;
        }

        function deleteSong(id) {
            if (!confirm('你確定要刪除這首歌嗎？')) return;

            console.log("發送刪除 API (假)");
            
            // API 刪除資料        
            // fetch(`/api/songs/${id}`, {
            //     method: 'DELETE'
            // })
            //     .then(res => {
            //         if (res.ok) {
            //             alert('刪除成功');
            //             location.reload(); // 重新整理頁面
            //         } else {
            //             alert('刪除失敗');
            //         }
            //     })
            //     .catch(err => {
            //         console.error(err);
            //         alert('刪除過程發生錯誤');
            //     });
        }
    </script>

</body>

</html>