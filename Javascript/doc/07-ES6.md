# JavaScript 教學 - ES6

參考：

範例：
* [ES6.html](../example/ES6.html)
* [ES6.js](../example/ES6.js)

---


## ES6 教學總覽
ES6 (ECMAScript 2015)是 JavaScript 的一個重大版本，加入了許多提升語言表達能力與開發效率的新特性。

以下為常見的 ES6 語法介紹。

### 1. `let` 與 `const`

取代傳統 var，支援區塊作用域。

#### `let`：區塊作用域變數

```js
let x = 10;  // 可重新指定
if (true) {
    let x = 20;
    console.log(x); // 20
}
console.log(x);   // 10

// var → function scope
// let/const → block scope
```

#### `const`：宣告常數 (不可重新賦值)

```js
const PI = 3.14; // 不可重新指定 (不可變)
// PI = 3.14159; // 錯誤：不能重新賦值
```

---

### 2. 箭頭函式 (Arrow Functions)

簡化函式撰寫，且**不綁定 this**

```js
// 傳統函式
function add(a, b) {
  return a + b;
}

// 箭頭函式
const add = (a, b) => a + b;
```

---

### 3. 模板字串 (Template Literals)

支援變數插入與多行字串。  
使用 **反引號 \`** 包裹，可插入變數與換行：

```js
const name = "Alice";
console.log(`Hello, ${name}!
歡迎來到 ES6 教學。`);
```

---

### 4. 預設值 (Default Parameters)
```js
function add(a, b = 1) {
    return a + b;
}

console.log(add(1)); // 2
```

### 5. 解構賦值 (Destructuring)

快速提取物件或陣列中的值。

#### 解構物件：

```js
let user = { name: "John", age: 30, address: { street: "123 Main St", city: "New York" } };
let { name, age, address: { street, city } } = user;

console.log(name); // "John"
console.log(age);  // 30
console.log(street); // "123 Main St"
console.log(city);   // "New York"
```

#### 解構陣列：

```js
let arr = [1, 2, [3, 4]];
let [a, b, [c, d]] = arr;

console.log(a); // 1
console.log(b); // 2
console.log(c); // 3
console.log(d); // 4
```

---

### 6. 擴展運算子 (Spread Operator)

#### 擴展物件：
```js
const obj = { name: "Tom" };
const newObj = { ...obj, age: 30 };
console.log(newObj); // { name: "Tom", age: 30 }
```

#### 擴展陣列：
```js
let arr1 = [1, 2, 3];
let arr2 = [...arr1, 4, 5];
console.log(arr2); // [1, 2, 3, 4, 5]
```

---

### 7. 剩餘運算子 (Rest Operator)

#### 物件範例
```js
const user3 = {
  name: 'Alice',
  age: 25,
  city: 'Taipei',
  email: 'alice@example.com'
};

const { name3, ...others } = user;

console.log(name3);    // 'Alice'
console.log(others);  // { age: 25, city: 'Taipei', email: 'alice@example.com' }
```

#### 陣列範例
```js
function sum(...args) {
    let total = 0;
    for (let arg of args) {
        total += arg;
    }
    return total;
}

console.log(sum(1, 2, 3, 4, 5)); // 15
```

---

### 物件屬性簡寫 (Shorthand Property Names)

```js
const name2 = "John";
const age2 = 30;
const user2 = { name2, age2 };
console.log(user2);
```

---

### 9. 模組 (Modules)

#### 導出 (export)

```js
// file: math.js
export const PI = 3.14159;
export function add(a, b) {
    return a + b;
}

export function multiply(a, b) {
    return a * b;
}

export default {
    PI,
    add,
    multiply
};
```

#### 匯入 (import)

```js
import { PI as myPI, add, multiply } from './math.js';
import myMath from './math.js';

console.log(myMath);
console.log(add(2, myPI)); // 5.14159
console.log(multiply(2, 3)); // 6
```

---

### 10. 類別 (Class)

```js
class Person {
  constructor(name) {
    this.name = name;
  }
  greet() {
    console.log(`Hi, I'm ${this.name}`);
  }
}

const p = new Person("Jane");
p.greet(); // Hi, I'm Jane
console.log(person);
```

---

### 11. 非同步處理 (Promise & async/await)

#### Promise 版本 (ES6)
```js
function getData(msg) {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            resolve('資料取得成功: ' + msg);
        }, 1000);
    });
}
```
```js
getData("Promise").then(result => {
    console.log(result); // 資料取得成功
}).catch(error => {
    console.error(error);
});
```

#### async/await 版本 (ES8)
```js
async function fetchData() {
  try {
    const result = await getData("async/await");
    console.log(result); // 資料取得成功
  } catch (error) {
    console.error(error);
  }
}

fetchData();
```

---

### 12. 其他 ES6 功能
| 功能         | 範例                                      |
| ---------- | --------------------------------------- |
| `for...of` | `for (let item of arr) {}`              |
| `Map`      | `let map = new Map(); map.set('a', 1);` |
| `Set`      | `let set = new Set([1,2,3,1]);`         |
| `Symbol`   | `let id = Symbol('id');`                |
| `includes` | `arr.includes(3)`                       |

---

### ES6 

| 特性              | 說明                                |
| --------------- | --------------------------------- |
| `let` / `const` | 區塊變數與常數，取代傳統 `var`                |
| 箭頭函式            | 簡化函式撰寫，且不綁定自己的 `this`             |
| 模板字串            | 使用反引號 \`\` 支援插入變數與換行的字串           |
| 解構賦值            | 快速拆解陣列與物件屬性，提高可讀性                 |
| 展開運算子           | 使用 `...` 快速複製、合併陣列或物件             |
| 預設參數            | 函式參數可直接給預設值，避免未定義                 |
| 剩餘參數            | 使用 `...` 收集多餘參數為陣列，代替 `arguments` |
| 模組化             | 使用 `import` / `export` 導入/導出模組    |
| 類別              | 使用 `class` 語法建立建構式與方法，支援繼承        |
| Promise         | 處理非同步操作，避免 callback 地獄            |
| `Map` / `Set`   | 新的資料結構，分別為鍵值對與不重複值集合              |
| `for...of`      | 更直覺的迭代方式，適用陣列、字串、Set、Map 等        |
| Symbol          | 建立獨一無二的值，常用作物件的私有屬性 key           |
| `includes()`    | 判斷陣列或字串是否包含特定值                    |

---